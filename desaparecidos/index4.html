<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=11,chrome=1">
  <meta name="description" content="Portal Oficial de la Fiscalía General del Estado de Veracruz">
  <meta name="keywords" content="fiscalia, veracruz, gobierno, abierto, transparencia">
  <meta name="author" content="Fiscalía General del Estado de Veracruz">  
  <title>Gobierno Abierto - Registro Público de Personas Desaparecidas</title>
  <link rel="icon" href="img/icon.png" sizes="192x192">


  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/6.6.5/sweetalert2.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <link href="css/botonazul.css" rel="stylesheet" type="text/css" />
  <link href="css/botongris.css" rel="stylesheet" type="text/css" />
  <link href="css/alertamarillo.css" rel="stylesheet" type="text/css" />
  <link href="css/cssfonts.css" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="css/header.css">
  <link rel="stylesheet" href="css/sticky-footer.css">
  <link rel="stylesheet" href="css/fichadesaparecido.css">
  <link rel="stylesheet" href="css/separador.css">
  <link rel="stylesheet" href="css/ficha-detalles.css">
  <link rel="stylesheet" href="css/panel-default.css">
  <link rel="stylesheet" href="css/formulario.css">
  <link rel="stylesheet" href="css/estilos.css">
  <link rel="stylesheet" href="css/medianavdesaparecidos.css">
    <script src="js/main.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/6.6.5/sweetalert2.js"></script>
  <!-- Include a polyfill for ES6 Promises (optional) for IE11, UC Browser and Android browser support -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/core-js/2.4.1/core.js"></script>
  <!--.......................-->
  
  
</head>

<body>
  <header>
    <div class="container conta">
      <div class="row">
        <div class="col-md-2 col-sm-3 col-xs-12 ">
          <div class="logotipo">
            <center>
            <img src="./img/logo.png" align="center" border="1" width="100" height="100"/>
            </center>
          </div>
        </div>
        <div class="col-md-8 col-sm-9 col-xs-12 ">
          <div class="form-group">
            <h3 class="titulos" align="center"><strong><span class="titulo1 titulotamaño">REGISTRO PÚBLICO</span><br><span class="titulo2 titulotamaño">DE PERSONAS DESAPARECIDAS</span></strong></h3>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="barranav" >

        <div class="menu_bar">
          <a href="#" class="bt-menu"><span class="glyphicon glyphicon-menu-hamburger"></span></a>
        </div>

        <nav class="text-center">
          <ul>
            <li class="lineamenu">
              <a href="./bienvenida.html" ><span class="glyphicon glyphicon-home" aria-hidden="true"></span>Bienvenida</a>
            </li><!--
            --><li class="submenu lineamenu" id="submenudesaparecidos" >
              <a href="#">Desaparecidos<span class="caret"></span></a>
                <ul class="children" id="mdesaparecidos">
                  <li title="Busqueda de Desaparecidos"><a href="index4.html"><span class="glyphicon glyphicon-search" aria-hidden="true"></span> Busqueda  </a></li>
                  <li title="Descargar Archivo"><a href="./desaparecidos.xlsx"><span class="glyphicon glyphicon-download-alt" aria-hidden="true"></span>Descargar</a></li>
                  <li title="ir a Infografía"><a href="./img/infografia.pdf"><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>Infografía</a></li>
                  <li title="Estadísticas de Desaparecidos"><a href="http://gobiernoabierto.fiscaliaveracruz.gob.mx/desaparecidos/img/GraficasDesaparecidosDic2016.pdf"><span class="glyphicon glyphicon-stats" aria-hidden="true"></span>Estadísticas</a></li>
                  <li title="Guía para la Denuncia de Personas Desaparecidas"><a href="http://gobiernoabierto.fiscaliaveracruz.gob.mx/desaparecidos/img/cartel.pdf"><span class="glyphicon glyphicon-book" arial-hidden="true"></span>Guía</a></li>
                </ul>
            </li><!--
            --><li class="submenu lineamenu" id="submenudetenidos">
                <a href="#">Detenidos<span class="caret"></span></a>
                  <ul class="children" id="mdetenidos">
                    <li title="Busqueda de Detenidos"><a href="../detenidos/index2.html"><span class="glyphicon glyphicon-search" aria-hidden="true"></span>Busqueda</a></li>
                    <li title="ir a Infografía"><a href="../detenidos/img/infografia.pdf"><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>Infografía</a></li>
                    <li title="Estadísticas de Detenidos"><a href="../detenidos/img/grafica.png"><span class="glyphicon glyphicon-stats" aria-hidden="true"></span>Estadísticas</a></li>
                  </ul>
            </li><!--
            --><li title="Ir a Pagina Principal">
                <a href="http://fiscaliaveracruz.gob.mx/">Fiscalía</a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
    </header>
<div class="container conta">
    <img class="img-responsive center barra" src="./img/barra.png"/>

    <div>
      <img src="img/slide2.jpg" class="img-responsive imgdetenidos1" alt="">
      <img src="img/slide2media.jpg" class="img-responsive imgdetenidos2" alt="">
      <img src="img/slide2mini.jpg" class="img-responsive imgdetenidos3" alt="">
    </div>

    <div class="panel panel-default">
      <div class="panel-heading panel-heading-customd" align="center">
        <h4 class="info-llama">Comuníquese de 9:00 a 15:00 hrs y de 18:00 a 21:00 hrs al teléfono: (228)8120841<br>y proporciona los datos de la persona que buscas para que te auxilien en el proceso si así lo prefieres.</h4>
      </div>
    </div>
    <p>

    <div class="panel " id="panel1" name="panel1"> 
      <div class="panel-heading panel2">
        <div class="row">
          <div class="col-xs-12 col-md-6">
            <h3 class="panel-title text-left">Consulta de personas reportadas como desaparecidas</h3>
          </div>
          <div class="col-xs-12 col-md-6 text-right">
            <!--<h3 class="panel-title" id="divfecha">Corte de revisión de su actualización mensual: </h3>
            <script>
              var f = new Date();
              var fecha = f.getDate() + "/" + (f.getMonth() +1) + "/" + f.getFullYear();
              var valorDiv = $("#divfecha").html();
              $("#divfecha").html(valorDiv + fecha);
            </script>--> 
          </div>
        </div>
      </div> 
      <div class="panel-body"> 
        <div class="box-body">
          <div class="row">
            <div class="col-xs-12 col-sm-6 col-md-2">
              <div class="form-group">
                <label for="nombre">Nombre:</label>
                <input type="text" class="form-control" id="nombre" name="nombre"required>
              </div>
            </div>
            <div class="col-xs-12 col-sm-6 col-md-2">
              <div class="form-group">
                <label for="paterno">Apellido Paterno:</label>
                <input type="text" class="form-control" id="paterno" required>
              </div>
            </div>
            <div class="col-xs-12 col-sm-6 col-md-2">
              <div class="form-group">
                <label for="materno">Apellido Materno:</label>
                <input type="text" class="form-control" id="materno" required>
              </div>
            </div>
            <div class="col-xs-12 col-sm-6 col-md-2">
              <div class="form-group">
                <label for="sexo">Sexo</label>
                <div>
                  <select class="form-control" id="sexo" required>
                    <option value="">Sexo</option>
                    <option value="m">Hombre</option>
                    <option value="f">Mujer</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="col-xs-12 col-sm-6 col-md-2">
              <div class="form-group">
                <label for="edad">Edad:</label>
                <input type='number' id="edad" min="1" name="edad" placeholder="Al Desaparecer (años)" class="form-control" />
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-xs-12 col-sm-3 col-md-2">
              <div class="form-group">
                <button type="submit" class="btn btn-azul btn-block" id="search" name="search" value="Buscar">Buscar</button>
              </div>
            </div>
            <div class="col-xs-12 col-sm-3 col-md-2">
              <div class="form-group">
                <button type="button" style="color:#000000"; href='javascript:;' onclick="limpiar();" class="btn btn-gris btn-block">Limpiar</button>
              </div>
            </div>
            <div class="text-right pull-right">
              <h6><a onclick="displayHelp();" title="Consulta la Ayuda para el uso del sitio" class="help-block" style="cursor: pointer; margin-right: 10px;"><span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span> Ayuda</a></h6>                          
            </div>
          </div>
        </div>
      </div>
    </div>

    <!--Modal ayuda-->
    <div id="modalHelp" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span class="glyphicon glyphicon-remove-sign" aria-hidden="true"></span></button>
              <h4 class="modal-title text-center">REGISTRO PÚBLICO DE PERSONAS DESAPARECIDAS</h4>
          </div>
          <div class="modal-body text-justify">
            <p>Este registro está integrado por los datos de las personas no localizadas, las cuales fueron reportadas ante esta autoridad. Este registro sólo contiene información de las personas que no han sido localizadas. El proceso de búsqueda en este Registro de Personas no Localizadas es de fácil uso, por lo que usted podrá realizar la búsqueda por uno, todos o la combinación de los rubros de: Nombre, Apellido Paterno, Apellido Materno, Edad y/o Sexo. Posterior a colocar la información por la que usted desea realizar la búsqueda, debe realizar un clic en el botón de Buscar, y en la parte inferior de la pantalla se desplegará las fotos de las personas no localizadas. Si desea visualizar más detalles de la persona no localizada deberá realizar un clic sobre la imagen de la foto a consultar.</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
          </div>
        </div>
      </div>    
    </div> 

    <div class="alert alert-warning-alt">
      <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
        <h5>Publicar datos de personas desaparecidas tiene como fin su <strong>búsqueda y localización</strong>, por lo que no se vulnera el derecho a su privacidad.</h5>
    </div>

    <!-- Modal de mostrar los resultadosmodal -->
    <div class="col-xs-12 ">
      <div class="modal fade" id="success" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" >
        <div class="modal-dialog">
          <div class="modal-content ficha-detalles" id="detailsDiv"></div>
        </div>
      </div>
    </div>

    <div>
      <div class="row" id="resultsDiv"></div>
    </div>

    <div class="row">
      <div class="col-md-offset-2 col-md-2 col-xs-4">
        <div class="form-group">
          <button type="button" style="color:#000000"; href='javascript:;' id="anterior" onclick="MostrarA();" class="btn btn-gris btn-block"><h6>Anterior</h6></button>
        </div>
      </div>
      <div class="col-md-4 col-xs-4">
        <div class="form-group">
          <div align="center" id="paginas"></div>
        </div>
      </div>
      <div class="col-md-2 col-xs-4">
        <div class="form-group">
          <button type="button" style="color:#000000"; href='javascript:;' id="siguiente" onclick="MostrarS();" class="btn btn-gris btn-block"><h6>Siguiente</h6></button>
        </div>
      </div>
    </div>

    <input type="hidden" name="muestra"  id="muestra" value="0">
    <input type="hidden" name="pags"  id="pags" value="0">

    <script>
    function displayHelp(){
      $("#modalHelp").modal();
    }

    $( document ).ready(function() {

    $("#panel1").keypress(function(e) {
       if(e.which == 13) {
        busca();
       }
    });

	    $('#siguiente').hide();
      $('#anterior').hide();
      var datos;
      
    });

    /*----------prueba de funcion------------*/
    $( "#search" ).click( function () {
      if($("#nombre").val()=="" && $("#paterno").val() == "" && $("#materno").val()=="" && $("#sexo").val()=="" && $('#edad').val() == ""){
        swal({
          title: '<h1>Atención</h1>',
          type: 'warning',
          html: '<h4">Debe proporcionar <strong>AL MENOS UN</strong> dato(nombre, paterno, materno, sexo, edad) para realizar la búsqueda.</h4>'
        });
        return false;
      }
      $('#paginas').empty();
      var pagina = 0;
      $.ajax({
        type: 'POST',
        contentType: 'application/json',
        url: 'index.php/consulta',
        dataType: "json",                  
        data: JSON.stringify({
          nombre: $("#nombre").val(),
          paterno: $("#paterno").val(),
          materno: $("#materno").val(),
          sexo: $("#sexo").val(),
          edad: $("#edad").val()
        }),
        success: function (data) {
				  datos = data;
				  var elements_per_page = 6;
          var max_size=data.length;
          var pagtot=parseInt(max_size/elements_per_page);
          var pagreal=max_size/elements_per_page;
          if (pagreal > pagtot) {
            pagtot = pagtot + 1
          }
          $('#resultsDiv').empty();
          var sta = 0;
          $.each(data, function(key, item) {
            if (key=="error_code"){
              swal({
                  title: '<h1>Atención</h1>',
                  type: 'error',
                  html: '<h4><strong>No existen resultados</strong> para la búsqueda realizada</h4>'
              });
              return false;
            }
            $('#siguiente').show();
            $('#anterior').show();
            var partefoto="";
            if(item.rutfoto!=null){
              partefoto=item.rutfoto.split("\\").pop();
            }
            if(sta < elements_per_page){ 
              var foto=item.rutfoto == null || item.rutfoto === "" ?'./img/desapsf.jpg':'./img/fotos/'+partefoto;
              if(foto=='./img/desapsf.jpg'){
                foto='./img/noexiste.jpg';//Para generar error automáticamente
              }
              var sexo=item.sexo=='M'?'Hombre':'Mujer';
              var origen=item.origen==null?'S/D':item.origen;
              if (item.apat==null) {
                item.apat='';
              }
              if (item.amat==null) {
                item.amat='';
              }
              if (item.fextrav=='00-00-0000') {
                item.fextrav=' Sin Dato';
              }
              htmlElement = $('<div onclick="getDetail('+item.id+');" class="col-xs-12 col-sm-6 col-md-6 col-lg-4 " id="'+item.id+'"> <div class="panel-ficha ficha-desaparecidos"> <div class="panel-body"> <div class="col-xs-4"> <span><img style="border: 4px solid #919396;" class="image_mini " src="'+foto+'" onerror="epic(this);" width="100" height="150"/></span> </div> <div class="data_mini ficha col-xs-8"> <p class="fuente-ficha-titulo padding"> '+item.nombre+' '+ item.apat +' '+ item.amat +'</p> <hr class="padding separador"> <p class="padding"> '+item.edad+' años</p> <hr class="separador padding"> <p class="padding"> '+sexo+'</p> <hr class="padding separador"> <p class="padding">Extraviado:'+item.fextrav+'</p> <hr class="padding separador"> </div> </div> <div class="panel-footer"> <input type="button" name="" value="VER M&Aacute;S DETALLES" class="boton-detalles" > </div> </div> </div>');
              $('#resultsDiv').append(htmlElement);
              sta = sta+1;
              if(sta == max_size){
                pagina = pagina+1;
                $("#pags").val(pagina);
                htmlElement = $('<div>Página: '+pagina+' de '+pagtot+' <br>Total de elementos: '+max_size+'</div>');
                $('#paginas').append(htmlElement);
                return false;
              }
							$("#muestra").val(sta);
            }else{
              pagina = pagina+1;
              $("#pags").val(pagina);
              htmlElement = $('<div>Página: '+pagina+' de '+pagtot+' <br>Total de elementos: '+max_size+'</div>');
              $('#paginas').append(htmlElement);
              return false;
            }
          });
        }
      });
    });

    function busca(){ 
      if($("#nombre").val()=="" && $("#paterno").val() == "" && $("#materno").val()=="" && $("#sexo").val()=="" && $('#edad').val() == ""){
        swal({
          title: '<h1>Atención</h1>',
          type: 'warning',
          html: '<h4">Debe proporcionar <strong>AL MENOS UN</strong> dato(nombre, paterno, materno, sexo, edad) para realizar la búsqueda.</h4>'
        });
        return false;
      }
      $('#paginas').empty();
      var pagina = 0;
      $.ajax({
        type: 'POST',
        contentType: 'application/json',
        url: 'index.php/consulta',
        dataType: "json",                  
        data: JSON.stringify({
          nombre: $("#nombre").val(),
          paterno: $("#paterno").val(),
          materno: $("#materno").val(),
          sexo: $("#sexo").val(),
          edad: $("#edad").val()
        }),
        success: function (data) {
          datos = data;
          var elements_per_page = 6;
          var max_size=data.length;
          var pagtot=parseInt(max_size/elements_per_page);
          var pagreal=max_size/elements_per_page;
          if (pagreal > pagtot) {
            pagtot = pagtot + 1
          }
          $('#resultsDiv').empty();
          var sta = 0;
          $.each(data, function(key, item) {
            if (key=="error_code"){
              swal({
                  title: '<h1>Atención</h1>',
                  type: 'error',
                  html: '<h4><strong>No existen resultados</strong> para la búsqueda realizada</h4>'
              });
              return false;
            }
            $('#siguiente').show();
            $('#anterior').show();
            var partefoto="";
            if(item.rutfoto!=null){
              partefoto=item.rutfoto.split("\\").pop();
            }
            if(sta < elements_per_page){ 
              var foto=item.rutfoto == null || item.rutfoto === "" ?'./img/desapsf.jpg':'./img/fotos/'+partefoto;
              if(foto=='./img/desapsf.jpg'){
                foto='./img/noexiste.jpg';//Para generar error automáticamente
              }
              var sexo=item.sexo=='M'?'Hombre':'Mujer';
              var origen=item.origen==null?'S/D':item.origen;
              if (item.apat==null) {
                item.apat='';
              }
              if (item.amat==null) {
                item.amat='';
              }
              if (item.fextrav=='00-00-0000') {
                item.fextrav=' Sin Dato';
              }
              htmlElement = $('<div onclick="getDetail('+item.id+');" class="col-xs-12 col-sm-6 col-md-6 col-lg-4 " id="'+item.id+'"> <div class="panel-ficha ficha-desaparecidos"> <div class="panel-body"> <div class="col-xs-4"> <span><img style="border: 4px solid #919396;" class="image_mini " src="'+foto+'" onerror="epic(this);" width="100" height="150"/></span> </div> <div class="data_mini ficha col-xs-8"> <p class="fuente-ficha padding"> '+item.nombre+' '+ item.apat +' '+ item.amat +'</p> <hr class="padding separador"> <p class="padding"> '+item.edad+' años</p> <hr class="separador padding"> <p class="padding"> '+sexo+'</p> <hr class="padding separador"> <p class="padding">Extraviado:'+item.fextrav+'</p> <hr class="padding separador"> </div> </div> <div class="panel-footer"> <input type="button" name="" value="VER M&Aacute;S DETALLES" class="boton-detalles" > </div> </div> </div>');
              $('#resultsDiv').append(htmlElement);
              sta = sta+1;
              if(sta == max_size){
                pagina = pagina+1;
                $("#pags").val(pagina);
                htmlElement = $('<div>Página: '+pagina+' de '+pagtot+' <br>Total de elementos: '+max_size+'</div>');
                $('#paginas').append(htmlElement);
                return false;
              }
              $("#muestra").val(sta);
            }else{
              pagina = pagina+1;
              $("#pags").val(pagina);
              htmlElement = $('<div>Página: '+pagina+' de '+pagtot+' <br>Total de elementos: '+max_size+'</div>');
              $('#paginas').append(htmlElement);
              return false;
            }
          });
        }
      });
  };

    /*Modal detalles*/
    function getDetail(id){
      $.ajax({
        type: 'POST',
        contentType: 'application/json',
        url: './index.php/consultaById',
        dataType: "json",                  
        data: JSON.stringify({
          id: id,
        }),
        success: function (data) {
          $('#detailsDiv').empty();
          $.each(data, function(key, item) {
            if (key=="error_code"){
              htmlElement = $('<h4>No existen resultados para la búsqueda realizada</h4>');
              $('#detailsDiv').append(htmlElement);
              return false;
            }
            var partefoto="";
            if(item.rutfoto!=null){
              partefoto=item.rutfoto.split("\\").pop();
            }
            var foto=item.rutfoto == null || item.rutfoto === "" ?'./img/desapsf.jpg':'./img/fotos/'+partefoto;
            if(foto=='./img/desapsf.jpg'){
              foto='./img/noexiste.jpg';//Para generar error automáticamente
            }
            var sexo=item.sexo=='M'?'Hombre':'Mujer';
            var origen=item.origen==null?'S/D':item.origen;
            if (item.apat==null) {
                item.apat='';
              }
              if (item.amat==null) {
                item.amat='';
              }
              if (item.fextrav=='00-00-0000') {
                item.fextrav=' Sin Dato';
              }
            htmlElement = $('<div class="modal-header" style="border:none; "> <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span class="glyphicon glyphicon-remove-sign" aria-hidden="true"> </span> </button> </div> <div class="modal-body "><div class="row"> <div class="col-xs-12 col-sm-4" style="text-align: center;""> <span><img style="border: 4px solid #919396;" class="image_mini " src="'+foto+'" onerror="epic(this);" width="150" height="195"/></span> </div> <br><br> <div class="data_mini col-xs-12 col-sm-8"> <p class="fuente-ficha">'+item.nombre+' '+ item.apat +' '+ item.amat +'</p> <hr class="separador2"> <br>'+item.edad+' años<br> <hr class="separador2"> '+sexo+'<br> <hr class="separador2"> <span>Extraviado:'+item.fextrav+'</span> <br><hr class="separador2"><br> <br> </div> <div> <p class="fuente-ficha" style="padding-left:15px;">DESCRIPCI&Oacute;N</p> </div> <div class="col-xs-6">Estatura: '+item.est +'<br>Complexi&oacute;n: '+item.compl +'<br>Ojos: '+item.ojos +'<br>Piel: '+item.piel +'<br>Cabello: '+item.cab +'<br> </div> <div class="col-xs-6"> Tipo de Cabello: '+item.tcab +'<br> Nariz: '+ item.nariz +'<br> Labios: '+item.labios +'<br> Cejas: '+item.cejas +'</div> </div> </div> <div class="numeros-contacto"> <span> <h4 align="center" class="fuente-ficha" style="color:#fff;"> <b>SI LO HA VISTO O LO RECONOCE</b> </h4>COMUNÍQUESE DE 9:00 A 15:00 HRS Y DE 18:00 A 21:00 HRS A:<br><span class="glyphicon glyphicon-earphone"> </span> 2288120841 <br><span class="glyphicon glyphicon-envelope"></span> personasdesaparecidas @fiscaliaveracruz.gob.mx<br>'+
              '<br><button class="form-control btn btn-primary center-block" id="informar" name="informar" onclick="darInforme('+item.id+');">Proporcionar informe anónimo</button><br> '+
              ' <!-- <p>  <a href="https://www.facebook.com/sharer.php?u=http://gobiernoabierto.fiscaliaveracruz.gob.mx/desaparecidos/detalles.php?id='+item.id+'"><i class="fa fa-facebook" aria-hidden="true"></i></a>  <a href="https://plus.google.com/share?url=http://gobiernoabierto.fiscaliaveracruz.gob.mx/desaparecidos/detalles.php?id='+item.id+'"><i class="fa fa-google-plus" aria-hidden="true"></i></a>   <a href="http://www.linkedin.com/shareArticle?url=http://gobiernoabierto.fiscaliaveracruz.gob.mx/desaparecidos/detalles.php?id='+item.id+'"><i class="fa fa-linkedin" aria-hidden="true"></i></a>    <a href="https://twitter.com/?status=Ayudanos a encontrar a '+item.nombre+' '+item.apat+' '+item.amat+'http://gobiernoabierto.fiscaliaveracruz.gob.mx/desaparecidos/detalles.php?id='+item.id+'"><i class="fa fa-twitter" aria-hidden="true"></i></a></p>-->'+
              ' SU INFORMACIÓN SER&Aacute; AN&Oacute;NIMA Y CONFIDENCIAL.</div>');
            $('#detailsDiv').append(htmlElement);
            $('#success').modal('show');
          });
          $('#detailsDiv').css("visibility", "visible");
          $('#warningDiv').css("visibility", "visible");
          var scrollPos = $('#detailsDiv');
          $(window).scrollTop(scrollPos);
        }
      });
    }

    function darInforme(id){
        $('#botonInforme').empty();
        htmlElement = $('<button ng-click="limpiarUpdatePassword()" type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button><button class="btn btn-primary" id="enviarInforme" onclick="enviarInforme('+id+');" >Enviar</button></div>');
        $('#botonInforme').append(htmlElement);
        $("#modalInforme").modal();
        $("#modalInforme").on("hidden.bs.modal", function () {
            $("#informe").val("");
            $('#success').modal('hide');
        });
    }

    function enviarInforme(id){
        $.ajax({
            type: 'POST',
            contentType: 'application/json',
            url: 'index.php/insertInforme',
            dataType: "json",                  
            data: JSON.stringify({
                id: id,
                informe: $("#informe").val()
            }),
            success: function (data) {
                if(data == '{"estado":"enviado"}'){
                    swal(
                        'Hecho',
                        'Se ha enviado correctamente el informe, muchas gracias por su colaboración.',
                        'success'
                    );
                    $("#informe").val("");
                    $("#modalInforme").modal('hide');
                    return true;
                }else{
                    swal(
                        'Atención',
                        'No se ha podido enviar el informe.',
                        'error'
                        );
                    return false;
                }
            }
        });
        //var scrollPos = $('#detailsDiv');
          //$(window).scrollTop(scrollPos);
    }

    function limpiar(){
      $('#nombre').val('');
      $('#paterno').val('');
      $('#materno').val('');
      $('#sexo').val('');
      $('#edad').val('');
      $('#resultsDiv').empty();
      $('#paginas').empty();
      $('#siguiente').hide();
      $('#anterior').hide();
    };

    function epic(c) {
      c.onerror='';
      c.src='./img/desapsf.jpg';
      c.style.border = "none";
      $(c).css("border", "none");
    };

    function MostrarS(){
      var pagina = parseInt($("#pags").val());
      var elemento = parseInt($("#muestra").val());
      var sta = 0;
      var elements_per_page = 6;
      var limit = elements_per_page + elemento;   
      var max_size= parseInt(datos.length);
      var pagtot=parseInt(max_size/elements_per_page);
      var pagreal=max_size/elements_per_page;
      if (pagreal > pagtot) {
        pagtot = pagtot + 1;
      }
      if(pagina < pagtot){
        $('#paginas').empty();
        $('#resultsDiv').empty();
        $.each(datos, function(key, item) {
          if (key=="error_code"){
            swal({
                  title: '<h1>Atención</h1>',
                  type: 'error',
                  html: '<h4><strong>No existen resultados</strong> para la búsqueda realizada</h4>'
              });
            return false;
          }
          var partefoto="";
          if(item.rutfoto!=null){
            partefoto=item.rutfoto.split("\\").pop();
          }
          if(sta < limit){ 
            if(sta >= elemento){ 
              var foto=item.rutfoto == null || item.rutfoto === "" ?'./img/desapsf.jpg':'./img/fotos/'+partefoto;
              if(foto=='./img/desapsf.jpg'){
                foto='./img/noexiste.jpg';//Para generar error automáticamente
              }
              var sexo=item.sexo=='M'?'Hombre':'Mujer';
              var origen=item.origen==null?'S/D':item.origen;
              if (item.apat==null) {
                item.apat='';
              }
              if (item.amat==null) {
                item.amat='';
              }
              if (item.fextrav=='00-00-0000') {
                item.fextrav=' Sin Dato';
              }
              htmlElement = $('<div onclick="getDetail('+item.id+');" class="col-xs-12 col-sm-6 col-md-6 col-lg-4 " id="'+item.id+'"> <div class="panel-ficha ficha-desaparecidos"> <div class="panel-body"> <div class="col-xs-4"> <span><img style="border: 4px solid #919396;" class="image_mini " src="'+foto+'" onerror="epic(this);" width="100" height="150"/></span> </div> <div class="data_mini ficha col-xs-8"> <p class="fuente-ficha padding"> '+item.nombre+' '+ item.apat +' '+ item.amat +'</p> <hr class="padding separador"> <p class="padding"> '+item.edad+' años</p> <hr class="separador padding"> <p class="padding"> '+sexo+'</p> <hr class="padding separador"> <p class="padding">Extraviado:'+item.fextrav+'</p> <hr class="padding separador"> </div> </div> <div class="panel-footer"> <input type="button" name="" value="VER M&Aacute;S DETALLES" class="boton-detalles" > </div> </div> </div>');
              $('#resultsDiv').append(htmlElement);
            }
            sta = sta+1;
            if(sta == max_size){
              pagina = pagina+1;
              $("#pags").val(pagina);
              htmlElement = $('<div>Página: '+pagina+' de '+pagtot+' <br>Total de elementos: '+max_size+'</div>');
              $('#paginas').append(htmlElement);
                return false;
            }
            $("#muestra").val(sta);
          }else{
            pagina = pagina+1;
            $("#pags").val(pagina);
            htmlElement = $('<div>Página: '+pagina+' de '+pagtot+' <br>Total de elementos: '+max_size+'</div>');
            $('#paginas').append(htmlElement);
            return false;
          }
        });      
      }
    };

    function MostrarA(){
      var pagina = parseInt($("#pags").val());
      var elemento = parseInt($("#muestra").val());
      var sta = 0;
      var elements_per_page = 6;
      var max_size=datos.length;    
      var pagtot=parseInt(max_size/elements_per_page);
      var pagreal=max_size/elements_per_page;
      if (pagreal > pagtot) {
        pagtot = pagtot + 1;
      }
      if(pagina > 2){
        if(pagina==pagtot){
          var x = (pagtot*elements_per_page)-max_size;
          elemento = ((elemento+x)-(elements_per_page*2))+1;  
        }else{
          elemento = elemento -(elements_per_page*2);
        }
      }else{
        if((pagtot == 2) && (max_size == 12) ){
          elemento = elemento - (pagina*elements_per_page)+1;
        }else{
          elemento = 0;
        }
      }
      var limit = elements_per_page + elemento;   
      if(pagina > 1){
        $('#paginas').empty();
        $('#resultsDiv').empty();
        $.each(datos, function(key, item) {
          if (key=="error_code"){
            swal({
                  title: '<h1>Atención</h1>',
                  type: 'error',
                  html: '<h4><strong>No existen resultados</strong> para la búsqueda realizada</h4>'
              });
            return false;
          }
          var partefoto="";
          if(item.rutfoto!=null){
            partefoto=item.rutfoto.split("\\").pop();
          }
          if(sta < limit){ 
            if(sta >= elemento){ 
              var foto=item.rutfoto == null || item.rutfoto === "" ?'./img/desapsf.jpg':'./img/fotos/'+partefoto;
              if(foto=='./img/desapsf.jpg'){
                foto='./img/noexiste.jpg';//Para generar error automáticamente
              }
              var sexo=item.sexo=='M'?'Hombre':'Mujer';
              var origen=item.origen==null?'S/D':item.origen;
              if (item.apat==null) {
                item.apat='';
              }
              if (item.amat==null) {
                item.amat='';
              }
              if (item.fextrav=='00-00-0000') {
                item.fextrav=' Sin Dato';
              }
              htmlElement = $('<div onclick="getDetail('+item.id+');" class="col-xs-12 col-sm-6 col-md-6 col-lg-4 " id="'+item.id+'"> <div class="panel-ficha ficha-desaparecidos"> <div class="panel-body"> <div class="col-xs-4"> <span><img style="border: 4px solid #919396;" class="image_mini " src="'+foto+'" onerror="epic(this);" width="100" height="150"/></span> </div> <div class="data_mini ficha col-xs-8"> <p class="fuente-ficha padding"> '+item.nombre+' '+ item.apat +' '+ item.amat +'</p> <hr class="padding separador"> <p class="padding"> '+item.edad+' años</p> <hr class="separador padding"> <p class="padding"> '+sexo+'</p> <hr class="padding separador"> <p class="padding">Extraviado:'+item.fextrav+'</p> <hr class="padding separador"> </div> </div> <div class="panel-footer"> <input type="button" name="" value="VER M&Aacute;S DETALLES" class="boton-detalles" > </div> </div> </div>');
              $('#resultsDiv').append(htmlElement);
            }
            sta = sta+1;
            $("#muestra").val(sta);
          }else{
            pagina = pagina-1;            
            $("#pags").val(pagina);            
            htmlElement = $('<div>Página: '+pagina+' de '+pagtot+' <br>Total de elementos: '+max_size+'</div>');
            $('#paginas').append(htmlElement);
            return false;
          }
        });   
      }    
    };
    </script>
  </div>

    <div id="modalInforme" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span class="glyphicon glyphicon-remove-sign" aria-hidden="true"></span></button>
                    <h4 class="modal-title text-center"><strong>Enviar informe que ayude a la localización de ésta persona</strong></h4>
                </div>
                <div class="modal-body text-center">
                    <div class="form-group form-inline">
                        <textarea class="form-control" name="informe" id="informe" cols="30" rows="5" style="width: 100%;"></textarea>
                    </div>
                    
                    <div class="alert alert-warning-alt" style="margin-bottom: 0px; padding: 0px;">
                        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                        <h5>La información proporcionada será anónima y confidencial.</h5>
                    </div>
                </div>
                <div class="modal-footer">
                    <div id="botonInforme"></div>
                </div>
            </div>
        </div>
    </div>

  <footer class="footer">
    <div class="row footer-area-wrap">
      <div class="container">
        <div class="col-xs-12 col-sm-4">
          <img src="./img/logo-footer.png" alt="Fiscalia General del Estado" width="140">
        </div>
        <div class="col-xs-12 col-sm-4 lineaFooter">
          <h4 class="negrita">Contacto</h4>
            Circuito Rafael Guízar y Valencia No. 147, 4to. Piso, Colonia Reserva Territorial C.P. 91096 Xalapa, Veracruz.
            <br>
            Teléfono: 01 228 812 08 41
            <br>
             personasdesaparecidas@fiscaliaveracruz.gob.mx
        </div>
        <div class="col-xs-12 col-sm-4 lineaFooter">
          <h4 class="negrita">Visitante No.</h4>
            <div class="textwidget"><a href="http://www.easycounter.com/es/">
                  <img src="//www.easycounter.com/counter.php?contactofiscalia" border="0" alt="Contador"></a>
                </div>
        </div>
      </div>
    </div>
    <div class="footer-container">
      <div class="container">
        <div class="row">
          <div class="col-xs-12 col-md-10">
            <div>Copyright © 2017 Fiscalía General del Estado de Veracruz, DCIIT</div>
          </div>
          <div class="col-xs-12 col-md-2 ">
            <a href="http://facebook.com/fgeveracruz/"><i class="fa fa-facebook" aria-hidden="true"></i></a>
            <a href="http://twitter.com/FGE_Veracruz"><i class="fa fa-twitter" aria-hidden="true"></i></a>
            <a href="https://www.youtube.com/channel/UC464yhyQ9Zc6FYkPyN69cgA"><i class="fa fa-youtube" aria-hidden="true"></i></a>
          </div>
        </div>
      </div>
    </div>
  </footer>
</body>
</html> 
